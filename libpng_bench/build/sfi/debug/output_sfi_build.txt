[0] build passes/runtime
[1] C code -> LLVM bc
[MarkMem1FFI] Marked FFI function: bench_fill_target_from_pool (arg0: ptrlike, inout, len_arg=1)
[MarkMem1FFI] Marked FFI function: c_png_encode_rgba (arg0: ptrlike, inout, len_arg=1)
[MarkMem1FFI] Marked FFI function: c_png_encode_rgba (arg3: ptrlike, inout, len_arg=4)
[MarkMem1FFI] Marked FFI function: c_png_encode_rgba (arg5: ptrlike, inout, len_arg=4)
[MarkMem1FFI] Marked FFI function: c_png_decode_rgba (arg0: ptrlike, inout, len_arg=1)
[MarkMem1FFI] Marked FFI function: c_png_decode_rgba (arg2: ptrlike, inout, len_arg=3)
[MarkMem1FFI] Marked FFI function: c_png_decode_rgba (arg4: ptrlike, inout, len_arg=3)
[MarkMem1FFI] Marked FFI function: c_png_decode_rgba (arg5: ptrlike, inout, len_arg=3)
[MarkMem1FFI] Dumped mem1-ffi list to /home/ehdgns/wasm_sfi/libpng_bench/build/sfi/mem1_ffi_list.tsv
[2] Rust code -> LLVM bc
[InjectMem1Markers] Loaded 3 entries from /home/ehdgns/wasm_sfi/libpng_bench/build/sfi/mem1_ro_list.tsv
[3] link + rewrite-wasm-ffi + sfi-bounds-check
[RewriteWasmFFI] Found call to: bench_fill_target_from_pool
[RewriteWasmFFI] bench_fill_target_from_pool has mem1-ffi attribute.
[RewriteWasmFFI] Found call to: c_libpng_version_number
[RewriteWasmFFI] c_libpng_version_number does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Processing pending copy-out and free operations. Post count: 1
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: __mem1_ro_ptr
[RewriteWasmFFI] __mem1_ro_ptr does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: c_png_encode_rgba
[RewriteWasmFFI] c_png_encode_rgba has mem1-ffi attribute.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Processing pending copy-out and free operations. Post count: 3
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: __mem1_ro_ptr
[RewriteWasmFFI] __mem1_ro_ptr does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: c_png_decode_rgba
[RewriteWasmFFI] c_png_decode_rgba has mem1-ffi attribute.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Processing pending copy-out and free operations. Post count: 4
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: __mem1_ro_ptr
[RewriteWasmFFI] __mem1_ro_ptr does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: c_png_decode_rgba
[RewriteWasmFFI] c_png_decode_rgba has mem1-ffi attribute.
[RewriteWasmFFI] Found call to: llvm.umul.with.overflow.i32
[RewriteWasmFFI] llvm.umul.with.overflow.i32 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Processing pending copy-out and free operations. Post count: 4
[RewriteWasmFFI] Found call to: memcmp
[RewriteWasmFFI] memcmp does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: bench_fill_target_from_pool
[RewriteWasmFFI] bench_fill_target_from_pool has mem1-ffi attribute.
[RewriteWasmFFI] Found call to: c_libpng_version_number
[RewriteWasmFFI] c_libpng_version_number does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: c_png_encode_rgba
[RewriteWasmFFI] c_png_encode_rgba has mem1-ffi attribute.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: c_png_decode_rgba
[RewriteWasmFFI] c_png_decode_rgba has mem1-ffi attribute.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Processing pending copy-out and free operations. Post count: 1
[RewriteWasmFFI] Processing pending copy-out and free operations. Post count: 3
[RewriteWasmFFI] Processing pending copy-out and free operations. Post count: 4
[RewriteWasmFFI] Found call to: llvm.umin.i32
[RewriteWasmFFI] llvm.umin.i32 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: memcpy
[RewriteWasmFFI] memcpy does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: png_access_version_number
[RewriteWasmFFI] png_access_version_number does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: memset
[RewriteWasmFFI] memset does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: png_image_begin_read_from_memory
[RewriteWasmFFI] png_image_begin_read_from_memory does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: png_image_finish_read
[RewriteWasmFFI] png_image_finish_read does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: png_image_free
[RewriteWasmFFI] png_image_free does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: memset
[RewriteWasmFFI] memset does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.start.p0
[RewriteWasmFFI] llvm.lifetime.start.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: png_image_write_to_memory
[RewriteWasmFFI] png_image_write_to_memory does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: png_image_write_to_memory
[RewriteWasmFFI] png_image_write_to_memory does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.lifetime.end.p0
[RewriteWasmFFI] llvm.lifetime.end.p0 does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: malloc
[RewriteWasmFFI] malloc does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: memset
[RewriteWasmFFI] memset does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: malloc
[RewriteWasmFFI] malloc does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: malloc
[RewriteWasmFFI] malloc does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: memcpy
[RewriteWasmFFI] memcpy does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.trap
[RewriteWasmFFI] llvm.trap does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.trap
[RewriteWasmFFI] llvm.trap does not have mem1-ffi attribute. Skipping.
[RewriteWasmFFI] Found call to: llvm.abs.i32
[RewriteWasmFFI] llvm.abs.i32 does not have mem1-ffi attribute. Skipping.
[SfiBoundsCheck] C_BASE=131072 C_END=16908288
[SfiBoundsCheck] target functions: 6
[4] codegen + wasm link
[5] wasm post-process
[6] wasmtime smoke test
done: /home/ehdgns/wasm_sfi/libpng_bench/build/sfi/final_sfi_libpng.wasm
